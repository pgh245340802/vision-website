# Automatic Website Creation

The goal of this project is to automatically generate a website from a scene folder that is produced by the MobileLighting app. Once the program is successfully executed, several HTML files will be generated, with the main page named home.html. There will also be a new folder named as the scene and contain all images displayed on the website. Right now, this program is designed for macOS and only works on macOS. 

## Getting Started

These instructions will get you a copy of the project up and running on your local machine for development and testing purposes. 

### Prerequisites

You should have Python running on your computer in order to execute this program. 

The Python program uses yattag(http://www.yattag.org/) to make it easier to generate HTML files. In order to install yattag on your computer, it is suggested that you use pip to do so with this command:

```
pip install yattag
```

More details about installing yattag can be found here:http://www.yattag.org/download-install. This includes a way to install yattag without using pip.

You should also have ImageMagick(http://www.imagemagick.org/script/index.php) installed on your computer before you try to run the program since it uses ImageMagick to resize images and convert formats. Here is a link to the instrunctions to download ImageMagick onto your own computer: http://www.imagemagick.org/script/download.php. If you are not familiar with ImageMagick, here is a brief guide to what it can do and how to use it: http://www.imagemagick.org/Usage/. However, this is not necessary for this project since all ImageMagick commands are already written.

Finally, before we can have the everything running, this program uses the the pfm2png and imginfo cpp programs from Professor Scharstein's utils folder. Copy that folder from basin, and remake it locally. 


### Installing

To have the program running on local environments, simply clone this GitHub repository to a local folder. Then in the same folder, create a "src" folder to store the original pfms generated from MobileLighting, as well as the converted png files. Under src, create a folder that contains all the scenes for which you wish to generate a website. NOTE: The scene folders MUST be generated by the MobileLighting app and strictly follow the folder structures for this program to work.

Before running, open the program generate-web.py and change the global variable UTILSPATH to the one where you have your utils folder is. Now you are ready to run the program. 

## Running the program

The program can be executed from the command line like this:

```
python3 generate-web.py [path of scene folder]
```

The program might take a while to complete, since it is converting a lot of images stored in the folders.

### Understanding what the program does

1. The program goes through the whole folder, finds all relevant pfms, and for each pfm, three pngs are generated: *name*-jet.png, *name*-spiral.png, *name*-jet-400.jpg, *name*-jet-600.jpg, *name*-spiral-400.jpg and *name*-spiral-600.jpg. All images are stored in the exact same folder structure under ./src/pngs/*scenename*.
2. The program creates an HTML file named home.html, which contains a table of all scenes. **This is the one you should visit after the program is completed**.
3. The program loops through all scene folders and adds one row for each scene. It also creates the following webpages for each scene: *scenename*-decoded.html, *scenename*-calib.html, *scenename*-xdisparity.html and *scenename*-ydisparity.html. There are links to all of them on the home page.

## Potential improvements:

As the summer approaches an end, I have to leave the program as it is. However, the following improvements could be made to the program, either by myself after summer, or by another student who keeps working on the project. Once a improvement is completed, it is marked italics. 

1. Update the text descriptions on the website to fit the new dataset.

2. Display the disparity range used to convert each pfm below each file name.

3. Some of the ydisparity images appear oddly blue. This might have something to do with the minimum and maximum values used to convert them from pfms to pngs. 

## Authors

* **Roger Dai** - *Initial work* 

## Acknowledgments

* Thanks to Professor Daniel Scharstein from Middlebury College for overseeing this project.
